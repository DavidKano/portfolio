---
// Componente contador de visitas (Astro)
---
<span class="visit-counter">
  <span>ðŸ‘€ Visitas:</span>
  <strong data-counter>â€”</strong>
</span>

<script is:inline>
  (async () => {
    const el = document.querySelector('.visit-counter [data-counter]');
    try {
      // Cambia los dos Ãºltimos segmentos si quieres separar pÃ¡ginas: p.ej. "portfolio/home"
      const res = await fetch('https://api.countapi.xyz/hit/davidcano-portfolio/home');
      if (!res.ok) throw new Error('HTTP ' + res.status);
      const data = await res.json();
      const value = typeof data.value === 'number' ? data.value : 0;
      el.textContent = value.toLocaleString();
      localStorage.setItem('vc-home', String(value));
    } catch (err) {
      // Fallback: Ãºltimo valor guardado o 1
      const prev = Number(localStorage.getItem('vc-home') || '1');
      el.textContent = prev.toLocaleString();
    }
  })();
</script>

<style>
  .visit-counter{
    display:inline-flex; align-items:center; gap:.35rem; font-size:.95rem; opacity:.9;
  }
</style>

